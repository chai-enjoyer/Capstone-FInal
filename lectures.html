<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lectures — Capstone Prep</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body class="lectures-page">
  <nav class="topbar">
    <a href="index.html" class="topbar-brand">Capstone Prep</a>
    <button class="burger" id="burger" aria-label="Menu" onclick="var l=document.querySelector('.topbar-links');l.classList.toggle('open');this.textContent=l.classList.contains('open')?'\u2715':'\u2630'">☰</button>
    <div class="topbar-links">
      <a href="index.html">Home</a>
      <a href="quiz-setup.html">Quiz</a>
      <a href="flashcards.html">Flashcards</a>
      <a href="lectures.html" class="active">Lectures</a>
      <a href="summary.html">Summary</a>
    </div>
  </nav>

  <main class="container fade-in">
    <h1>Lectures</h1>

    <div class="lecture-layout">
    <div class="lecture-list" id="lecture-list">
      <div class="lecture-item" data-pdf="lectures/Lecture 1.pdf" onclick="openPDF(this)">
        <span class="lecture-num">1</span>
        <span class="lecture-title">Lecture 1</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 2.pdf" onclick="openPDF(this)">
        <span class="lecture-num">2</span>
        <span class="lecture-title">Lecture 2</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 3.pdf" onclick="openPDF(this)">
        <span class="lecture-num">3</span>
        <span class="lecture-title">Lecture 3</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 4.pdf" onclick="openPDF(this)">
        <span class="lecture-num">4</span>
        <span class="lecture-title">Lecture 4</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 5.pdf" onclick="openPDF(this)">
        <span class="lecture-num">5</span>
        <span class="lecture-title">Lecture 5</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 6.pdf" onclick="openPDF(this)">
        <span class="lecture-num">6</span>
        <span class="lecture-title">Lecture 6</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 7.pdf" onclick="openPDF(this)">
        <span class="lecture-num">7</span>
        <span class="lecture-title">Lecture 7</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 8.pdf" onclick="openPDF(this)">
        <span class="lecture-num">8</span>
        <span class="lecture-title">Lecture 8</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 9.pdf" onclick="openPDF(this)">
        <span class="lecture-num">9</span>
        <span class="lecture-title">Lecture 9</span>
        <span class="lecture-icon">›</span>
      </div>
      <div class="lecture-item" data-pdf="lectures/Lecture 10.pdf" onclick="openPDF(this)">
        <span class="lecture-num">10</span>
        <span class="lecture-title">Lecture 10</span>
        <span class="lecture-icon">›</span>
      </div>
    </div>

    <!-- PDF Viewer -->
    <div class="pdf-viewer-wrap" id="pdf-viewer-wrap">
      <div class="lecture-placeholder" id="lecture-placeholder">
        <div class="lecture-placeholder-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg></div>
        <p>Select a lecture from the list to start reading</p>
      </div>
      <div class="pdf-viewer-header" id="pdf-viewer-header">
        <span id="pdf-title">Lecture</span>
        <div style="display:flex;gap:8px;align-items:center">
          <a id="pdf-newtab" href="#" target="_blank" class="btn btn-ghost btn-sm">Open in tab ↗</a>
          <button class="btn btn-ghost btn-sm" onclick="closePDF()">✕ Close</button>
        </div>
      </div>
      <object id="pdf-object" class="pdf-viewer" data="" type="application/pdf">
        <p style="padding:40px;text-align:center;color:var(--text-secondary)">
          Your browser cannot display this PDF inline.<br>
          <a id="pdf-fallback-link" href="#" target="_blank" class="btn btn-primary" style="margin-top:16px">Download PDF</a>
        </p>
      </object>
    </div>
    </div>
  </main>

  <button class="go-top" id="go-top" onclick="window.scrollTo({top:0,behavior:'smooth'})">↑</button>

  <script>
    // Go-top visibility
    (function() {
      const gt = document.getElementById('go-top');
      if (gt) window.addEventListener('scroll', () => {
        gt.classList.toggle('visible', window.scrollY > 300);
      });
    })();

    let activeLecture = null;

    function openPDF(el) {
      const pdf = el.getAttribute('data-pdf');
      const title = el.querySelector('.lecture-title').textContent;

      // Toggle if same lecture clicked
      if (activeLecture === el) { closePDF(); return; }

      // Highlight active
      document.querySelectorAll('.lecture-item').forEach(i => i.classList.remove('active-lecture'));
      el.classList.add('active-lecture');
      activeLecture = el;

      document.getElementById('pdf-title').textContent = title;
      document.getElementById('pdf-newtab').href = pdf;
      document.getElementById('pdf-fallback-link').href = pdf;

      // Use <object> tag — better PDF embedding than iframe
      const obj = document.getElementById('pdf-object');
      obj.data = pdf;

      const wrap = document.getElementById('pdf-viewer-wrap');
      wrap.classList.add('has-pdf');

      if (window.innerWidth < 900) {
        setTimeout(() => {
          wrap.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
      }
    }

    function closePDF() {
      document.getElementById('pdf-viewer-wrap').classList.remove('has-pdf');
      document.getElementById('pdf-object').data = '';
      document.querySelectorAll('.lecture-item').forEach(i => i.classList.remove('active-lecture'));
      activeLecture = null;
    }
  </script>
</body>
</html>
